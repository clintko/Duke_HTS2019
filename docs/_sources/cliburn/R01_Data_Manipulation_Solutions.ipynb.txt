{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Data Manipulation in the `tidyverse`"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Load library"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Registered S3 methods overwritten by 'ggplot2':\n",
      "  method         from \n",
      "  [.quosures     rlang\n",
      "  c.quosures     rlang\n",
      "  print.quosures rlang\n",
      "── \u001b[1mAttaching packages\u001b[22m ─────────────────────────────────────── tidyverse 1.2.1 ──\n",
      "\u001b[32m✔\u001b[39m \u001b[34mggplot2\u001b[39m 3.1.1     \u001b[32m✔\u001b[39m \u001b[34mpurrr  \u001b[39m 0.3.2\n",
      "\u001b[32m✔\u001b[39m \u001b[34mtibble \u001b[39m 2.1.2     \u001b[32m✔\u001b[39m \u001b[34mdplyr  \u001b[39m 0.8.1\n",
      "\u001b[32m✔\u001b[39m \u001b[34mtidyr  \u001b[39m 0.8.3     \u001b[32m✔\u001b[39m \u001b[34mstringr\u001b[39m 1.4.0\n",
      "\u001b[32m✔\u001b[39m \u001b[34mreadr  \u001b[39m 1.3.1     \u001b[32m✔\u001b[39m \u001b[34mforcats\u001b[39m 0.4.0\n",
      "── \u001b[1mConflicts\u001b[22m ────────────────────────────────────────── tidyverse_conflicts() ──\n",
      "\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n",
      "\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n"
     ]
    }
   ],
   "source": [
    "library(tidyverse)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## What data sets are available?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "help(starwars)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Bssic information"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<ol class=list-inline>\n",
       "\t<li>'tbl_df'</li>\n",
       "\t<li>'tbl'</li>\n",
       "\t<li>'data.frame'</li>\n",
       "</ol>\n"
      ],
      "text/latex": [
       "\\begin{enumerate*}\n",
       "\\item 'tbl\\_df'\n",
       "\\item 'tbl'\n",
       "\\item 'data.frame'\n",
       "\\end{enumerate*}\n"
      ],
      "text/markdown": [
       "1. 'tbl_df'\n",
       "2. 'tbl'\n",
       "3. 'data.frame'\n",
       "\n",
       "\n"
      ],
      "text/plain": [
       "[1] \"tbl_df\"     \"tbl\"        \"data.frame\""
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "class(starwars)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<ol class=list-inline>\n",
       "\t<li>87</li>\n",
       "\t<li>13</li>\n",
       "</ol>\n"
      ],
      "text/latex": [
       "\\begin{enumerate*}\n",
       "\\item 87\n",
       "\\item 13\n",
       "\\end{enumerate*}\n"
      ],
      "text/markdown": [
       "1. 87\n",
       "2. 13\n",
       "\n",
       "\n"
      ],
      "text/plain": [
       "[1] 87 13"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "dim(starwars)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "87"
      ],
      "text/latex": [
       "87"
      ],
      "text/markdown": [
       "87"
      ],
      "text/plain": [
       "[1] 87"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "nrow(starwars)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "13"
      ],
      "text/latex": [
       "13"
      ],
      "text/markdown": [
       "13"
      ],
      "text/plain": [
       "[1] 13"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "ncol(starwars)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Luke Skywalker</td><td>172</td><td>77</td><td>blond</td><td>fair       </td><td>blue  </td><td> 19</td><td>male</td><td>Tatooine</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>Snowspeeder          , Imperial Speeder Bike</td><td>X-wing          , Imperial shuttle</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>167</td><td>75</td><td>NA   </td><td>gold       </td><td>yellow</td><td>112</td><td>NA  </td><td>Tatooine</td><td>Droid</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td></td></tr>\n",
       "\t<tr><td>R2-D2         </td><td> 96</td><td>32</td><td>NA   </td><td>white, blue</td><td>red   </td><td> 33</td><td>NA  </td><td>Naboo   </td><td>Droid</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td></td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t Luke Skywalker & 172 & 77 & blond & fair        & blue   &  19 & male & Tatooine & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & Snowspeeder          , Imperial Speeder Bike & X-wing          , Imperial shuttle\\\\\n",
       "\t C-3PO          & 167 & 75 & NA    & gold        & yellow & 112 & NA   & Tatooine & Droid & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & \\\\\n",
       "\t R2-D2          &  96 & 32 & NA    & white, blue & red    &  33 & NA   & Naboo    & Droid & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       &  & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| Luke Skywalker | 172 | 77 | blond | fair        | blue   |  19 | male | Tatooine | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | Snowspeeder          , Imperial Speeder Bike | X-wing          , Imperial shuttle |\n",
       "| C-3PO          | 167 | 75 | NA    | gold        | yellow | 112 | NA   | Tatooine | Droid | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | <!----> |\n",
       "| R2-D2          |  96 | 32 | NA    | white, blue | red    |  33 | NA   | Naboo    | Droid | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | <!----> | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name           height mass hair_color skin_color  eye_color birth_year gender\n",
       "1 Luke Skywalker 172    77   blond      fair        blue       19        male  \n",
       "2 C-3PO          167    75   NA         gold        yellow    112        NA    \n",
       "3 R2-D2           96    32   NA         white, blue red        33        NA    \n",
       "  homeworld species\n",
       "1 Tatooine  Human  \n",
       "2 Tatooine  Droid  \n",
       "3 Naboo     Droid  \n",
       "  films                                                                                                                                                                        \n",
       "1 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens                                                        \n",
       "2 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope                                      \n",
       "3 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      \n",
       "  vehicles                                    \n",
       "1 Snowspeeder          , Imperial Speeder Bike\n",
       "2                                             \n",
       "3                                             \n",
       "  starships                         \n",
       "1 X-wing          , Imperial shuttle\n",
       "2                                   \n",
       "3                                   "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "head(starwars, 3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>BB8           </td><td> NA</td><td>NA</td><td>none   </td><td>none   </td><td>black  </td><td>NA</td><td>none  </td><td>NA   </td><td>Droid</td><td>The Force Awakens</td><td></td><td></td></tr>\n",
       "\t<tr><td>Captain Phasma</td><td> NA</td><td>NA</td><td>unknown</td><td>unknown</td><td>unknown</td><td>NA</td><td>female</td><td>NA   </td><td>NA   </td><td>The Force Awakens</td><td></td><td></td></tr>\n",
       "\t<tr><td>Padmé Amidala </td><td>165</td><td>45</td><td>brown  </td><td>light  </td><td>brown  </td><td>46</td><td>female</td><td>Naboo</td><td>Human</td><td>Attack of the Clones, The Phantom Menace  , Revenge of the Sith </td><td></td><td>H-type Nubian yacht, Naboo star skiff   , Naboo fighter      </td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t BB8            &  NA & NA & none    & none    & black   & NA & none   & NA    & Droid & The Force Awakens &  & \\\\\n",
       "\t Captain Phasma &  NA & NA & unknown & unknown & unknown & NA & female & NA    & NA    & The Force Awakens &  & \\\\\n",
       "\t Padmé Amidala  & 165 & 45 & brown   & light   & brown   & 46 & female & Naboo & Human & Attack of the Clones, The Phantom Menace  , Revenge of the Sith  &  & H-type Nubian yacht, Naboo star skiff   , Naboo fighter      \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| BB8            |  NA | NA | none    | none    | black   | NA | none   | NA    | Droid | The Force Awakens | <!----> | <!----> |\n",
       "| Captain Phasma |  NA | NA | unknown | unknown | unknown | NA | female | NA    | NA    | The Force Awakens | <!----> | <!----> |\n",
       "| Padmé Amidala  | 165 | 45 | brown   | light   | brown   | 46 | female | Naboo | Human | Attack of the Clones, The Phantom Menace  , Revenge of the Sith  | <!----> | H-type Nubian yacht, Naboo star skiff   , Naboo fighter       |\n",
       "\n"
      ],
      "text/plain": [
       "  name           height mass hair_color skin_color eye_color birth_year gender\n",
       "1 BB8             NA    NA   none       none       black     NA         none  \n",
       "2 Captain Phasma  NA    NA   unknown    unknown    unknown   NA         female\n",
       "3 Padmé Amidala  165    45   brown      light      brown     46         female\n",
       "  homeworld species\n",
       "1 NA        Droid  \n",
       "2 NA        NA     \n",
       "3 Naboo     Human  \n",
       "  films                                                            vehicles\n",
       "1 The Force Awakens                                                        \n",
       "2 The Force Awakens                                                        \n",
       "3 Attack of the Clones, The Phantom Menace  , Revenge of the Sith          \n",
       "  starships                                                    \n",
       "1                                                              \n",
       "2                                                              \n",
       "3 H-type Nubian yacht, Naboo star skiff   , Naboo fighter      "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "tail(starwars, 3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Sly Moore          </td><td>178</td><td>48</td><td>none </td><td>pale               </td><td>white </td><td>NA</td><td>female</td><td>Umbara  </td><td>NA   </td><td>Attack of the Clones, Revenge of the Sith </td><td></td><td></td></tr>\n",
       "\t<tr><td>Bail Prestor Organa</td><td>191</td><td>NA</td><td>black</td><td>tan                </td><td>brown </td><td>67</td><td>male  </td><td>Alderaan</td><td>Human</td><td>Attack of the Clones, Revenge of the Sith </td><td></td><td></td></tr>\n",
       "\t<tr><td>Ben Quadinaros     </td><td>163</td><td>65</td><td>none </td><td>grey, green, yellow</td><td>orange</td><td>NA</td><td>male  </td><td>Tund    </td><td>Toong</td><td>The Phantom Menace</td><td></td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t Sly Moore           & 178 & 48 & none  & pale                & white  & NA & female & Umbara   & NA    & Attack of the Clones, Revenge of the Sith  &  & \\\\\n",
       "\t Bail Prestor Organa & 191 & NA & black & tan                 & brown  & 67 & male   & Alderaan & Human & Attack of the Clones, Revenge of the Sith  &  & \\\\\n",
       "\t Ben Quadinaros      & 163 & 65 & none  & grey, green, yellow & orange & NA & male   & Tund     & Toong & The Phantom Menace &  & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| Sly Moore           | 178 | 48 | none  | pale                | white  | NA | female | Umbara   | NA    | Attack of the Clones, Revenge of the Sith  | <!----> | <!----> |\n",
       "| Bail Prestor Organa | 191 | NA | black | tan                 | brown  | 67 | male   | Alderaan | Human | Attack of the Clones, Revenge of the Sith  | <!----> | <!----> |\n",
       "| Ben Quadinaros      | 163 | 65 | none  | grey, green, yellow | orange | NA | male   | Tund     | Toong | The Phantom Menace | <!----> | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name                height mass hair_color skin_color          eye_color\n",
       "1 Sly Moore           178    48   none       pale                white    \n",
       "2 Bail Prestor Organa 191    NA   black      tan                 brown    \n",
       "3 Ben Quadinaros      163    65   none       grey, green, yellow orange   \n",
       "  birth_year gender homeworld species\n",
       "1 NA         female Umbara    NA     \n",
       "2 67         male   Alderaan  Human  \n",
       "3 NA         male   Tund      Toong  \n",
       "  films                                      vehicles starships\n",
       "1 Attack of the Clones, Revenge of the Sith                    \n",
       "2 Attack of the Clones, Revenge of the Sith                    \n",
       "3 The Phantom Menace                                           "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "sample_n(starwars, 3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Piping"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>R2-D2      </td><td> 96</td><td> 32</td><td>NA   </td><td>white, blue</td><td>red   </td><td>33.0</td><td>NA    </td><td>Naboo   </td><td>Droid</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td></td><td></td></tr>\n",
       "\t<tr><td>Darth Vader</td><td>202</td><td>136</td><td>none </td><td>white      </td><td>yellow</td><td>41.9</td><td>male  </td><td>Tatooine</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td>TIE Advanced x1</td></tr>\n",
       "\t<tr><td>Leia Organa</td><td>150</td><td> 49</td><td>brown</td><td>light      </td><td>brown </td><td>19.0</td><td>female</td><td>Alderaan</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>Imperial Speeder Bike</td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t R2-D2       &  96 &  32 & NA    & white, blue & red    & 33.0 & NA     & Naboo    & Droid & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       &  & \\\\\n",
       "\t Darth Vader & 202 & 136 & none  & white       & yellow & 41.9 & male   & Tatooine & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & TIE Advanced x1\\\\\n",
       "\t Leia Organa & 150 &  49 & brown & light       & brown  & 19.0 & female & Alderaan & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & Imperial Speeder Bike & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| R2-D2       |  96 |  32 | NA    | white, blue | red    | 33.0 | NA     | Naboo    | Droid | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | <!----> | <!----> |\n",
       "| Darth Vader | 202 | 136 | none  | white       | yellow | 41.9 | male   | Tatooine | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | TIE Advanced x1 |\n",
       "| Leia Organa | 150 |  49 | brown | light       | brown  | 19.0 | female | Alderaan | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | Imperial Speeder Bike | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name        height mass hair_color skin_color  eye_color birth_year gender\n",
       "1 R2-D2        96     32  NA         white, blue red       33.0       NA    \n",
       "2 Darth Vader 202    136  none       white       yellow    41.9       male  \n",
       "3 Leia Organa 150     49  brown      light       brown     19.0       female\n",
       "  homeworld species\n",
       "1 Naboo     Droid  \n",
       "2 Tatooine  Human  \n",
       "3 Alderaan  Human  \n",
       "  films                                                                                                                                                                        \n",
       "1 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      \n",
       "2 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope                                                                                        \n",
       "3 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens                                                        \n",
       "  vehicles              starships      \n",
       "1                                      \n",
       "2                       TIE Advanced x1\n",
       "3 Imperial Speeder Bike                "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% head(5) %>% tail(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>R2-D2      </td><td> 96</td><td> 32</td><td>NA   </td><td>white, blue</td><td>red   </td><td>33.0</td><td>NA    </td><td>Naboo   </td><td>Droid</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td></td><td></td></tr>\n",
       "\t<tr><td>Darth Vader</td><td>202</td><td>136</td><td>none </td><td>white      </td><td>yellow</td><td>41.9</td><td>male  </td><td>Tatooine</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td>TIE Advanced x1</td></tr>\n",
       "\t<tr><td>Leia Organa</td><td>150</td><td> 49</td><td>brown</td><td>light      </td><td>brown </td><td>19.0</td><td>female</td><td>Alderaan</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>Imperial Speeder Bike</td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t R2-D2       &  96 &  32 & NA    & white, blue & red    & 33.0 & NA     & Naboo    & Droid & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       &  & \\\\\n",
       "\t Darth Vader & 202 & 136 & none  & white       & yellow & 41.9 & male   & Tatooine & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & TIE Advanced x1\\\\\n",
       "\t Leia Organa & 150 &  49 & brown & light       & brown  & 19.0 & female & Alderaan & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & Imperial Speeder Bike & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| R2-D2       |  96 |  32 | NA    | white, blue | red    | 33.0 | NA     | Naboo    | Droid | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | <!----> | <!----> |\n",
       "| Darth Vader | 202 | 136 | none  | white       | yellow | 41.9 | male   | Tatooine | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | TIE Advanced x1 |\n",
       "| Leia Organa | 150 |  49 | brown | light       | brown  | 19.0 | female | Alderaan | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | Imperial Speeder Bike | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name        height mass hair_color skin_color  eye_color birth_year gender\n",
       "1 R2-D2        96     32  NA         white, blue red       33.0       NA    \n",
       "2 Darth Vader 202    136  none       white       yellow    41.9       male  \n",
       "3 Leia Organa 150     49  brown      light       brown     19.0       female\n",
       "  homeworld species\n",
       "1 Naboo     Droid  \n",
       "2 Tatooine  Human  \n",
       "3 Alderaan  Human  \n",
       "  films                                                                                                                                                                        \n",
       "1 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      \n",
       "2 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope                                                                                        \n",
       "3 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens                                                        \n",
       "  vehicles              starships      \n",
       "1                                      \n",
       "2                       TIE Advanced x1\n",
       "3 Imperial Speeder Bike                "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "head(5) %>%\n",
    "tail(3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Select"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>birth_year</th><th scope=col>species</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Luke Skywalker</td><td> 19</td><td>Human</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>112</td><td>Droid</td></tr>\n",
       "\t<tr><td>R2-D2         </td><td> 33</td><td>Droid</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & birth\\_year & species\\\\\n",
       " <chr> & <dbl> & <chr>\\\\\n",
       "\\hline\n",
       "\t Luke Skywalker &  19 & Human\\\\\n",
       "\t C-3PO          & 112 & Droid\\\\\n",
       "\t R2-D2          &  33 & Droid\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| name &lt;chr&gt; | birth_year &lt;dbl&gt; | species &lt;chr&gt; |\n",
       "|---|---|---|\n",
       "| Luke Skywalker |  19 | Human |\n",
       "| C-3PO          | 112 | Droid |\n",
       "| R2-D2          |  33 | Droid |\n",
       "\n"
      ],
      "text/plain": [
       "  name           birth_year species\n",
       "1 Luke Skywalker  19        Human  \n",
       "2 C-3PO          112        Droid  \n",
       "3 R2-D2           33        Droid  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "select(name, birth_year, species) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>species</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Luke Skywalker</td><td> 19</td><td>Human</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>112</td><td>Droid</td></tr>\n",
       "\t<tr><td>R2-D2         </td><td> 33</td><td>Droid</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & species\\\\\n",
       " <chr> & <dbl> & <chr>\\\\\n",
       "\\hline\n",
       "\t Luke Skywalker &  19 & Human\\\\\n",
       "\t C-3PO          & 112 & Droid\\\\\n",
       "\t R2-D2          &  33 & Droid\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | species &lt;chr&gt; |\n",
       "|---|---|---|\n",
       "| Luke Skywalker |  19 | Human |\n",
       "| C-3PO          | 112 | Droid |\n",
       "| R2-D2          |  33 | Droid |\n",
       "\n"
      ],
      "text/plain": [
       "  name           age species\n",
       "1 Luke Skywalker  19 Human  \n",
       "2 C-3PO          112 Droid  \n",
       "3 R2-D2           33 Droid  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "select(name, age=birth_year, species) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 10</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>172</td><td>77</td><td>blond</td><td>fair       </td><td>blue  </td><td>male</td><td>Tatooine</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>Snowspeeder          , Imperial Speeder Bike</td><td>X-wing          , Imperial shuttle</td></tr>\n",
       "\t<tr><td>167</td><td>75</td><td>NA   </td><td>gold       </td><td>yellow</td><td>NA  </td><td>Tatooine</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td></td></tr>\n",
       "\t<tr><td> 96</td><td>32</td><td>NA   </td><td>white, blue</td><td>red   </td><td>NA  </td><td>Naboo   </td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td></td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 10\n",
       "\\begin{tabular}{r|llllllllll}\n",
       " height & mass & hair\\_color & skin\\_color & eye\\_color & gender & homeworld & films & vehicles & starships\\\\\n",
       " <int> & <dbl> & <chr> & <chr> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t 172 & 77 & blond & fair        & blue   & male & Tatooine & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & Snowspeeder          , Imperial Speeder Bike & X-wing          , Imperial shuttle\\\\\n",
       "\t 167 & 75 & NA    & gold        & yellow & NA   & Tatooine & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & \\\\\n",
       "\t  96 & 32 & NA    & white, blue & red    & NA   & Naboo    & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       &  & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 10\n",
       "\n",
       "| height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|\n",
       "| 172 | 77 | blond | fair        | blue   | male | Tatooine | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | Snowspeeder          , Imperial Speeder Bike | X-wing          , Imperial shuttle |\n",
       "| 167 | 75 | NA    | gold        | yellow | NA   | Tatooine | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | <!----> |\n",
       "|  96 | 32 | NA    | white, blue | red    | NA   | Naboo    | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | <!----> | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  height mass hair_color skin_color  eye_color gender homeworld\n",
       "1 172    77   blond      fair        blue      male   Tatooine \n",
       "2 167    75   NA         gold        yellow    NA     Tatooine \n",
       "3  96    32   NA         white, blue red       NA     Naboo    \n",
       "  films                                                                                                                                                                        \n",
       "1 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens                                                        \n",
       "2 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope                                      \n",
       "3 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      \n",
       "  vehicles                                    \n",
       "1 Snowspeeder          , Imperial Speeder Bike\n",
       "2                                             \n",
       "3                                             \n",
       "  starships                         \n",
       "1 X-wing          , Imperial shuttle\n",
       "2                                   \n",
       "3                                   "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "select(-name, -birth_year, -species) %>% \n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>skin_color</th><th scope=col>species</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>fair       </td><td>Human</td><td>X-wing          , Imperial shuttle</td></tr>\n",
       "\t<tr><td>gold       </td><td>Droid</td><td></td></tr>\n",
       "\t<tr><td>white, blue</td><td>Droid</td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " skin\\_color & species & starships\\\\\n",
       " <chr> & <chr> & <list>\\\\\n",
       "\\hline\n",
       "\t fair        & Human & X-wing          , Imperial shuttle\\\\\n",
       "\t gold        & Droid & \\\\\n",
       "\t white, blue & Droid & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| skin_color &lt;chr&gt; | species &lt;chr&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|\n",
       "| fair        | Human | X-wing          , Imperial shuttle |\n",
       "| gold        | Droid | <!----> |\n",
       "| white, blue | Droid | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  skin_color  species starships                         \n",
       "1 fair        Human   X-wing          , Imperial shuttle\n",
       "2 gold        Droid                                     \n",
       "3 white, blue Droid                                     "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(starts_with('s')) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 4</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>height</th><th scope=col>hair_color</th><th scope=col>birth_year</th><th scope=col>species</th></tr>\n",
       "\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>172</td><td>blond</td><td> 19</td><td>Human</td></tr>\n",
       "\t<tr><td>167</td><td>NA   </td><td>112</td><td>Droid</td></tr>\n",
       "\t<tr><td> 96</td><td>NA   </td><td> 33</td><td>Droid</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 4\n",
       "\\begin{tabular}{r|llll}\n",
       " height & hair\\_color & birth\\_year & species\\\\\n",
       " <int> & <chr> & <dbl> & <chr>\\\\\n",
       "\\hline\n",
       "\t 172 & blond &  19 & Human\\\\\n",
       "\t 167 & NA    & 112 & Droid\\\\\n",
       "\t  96 & NA    &  33 & Droid\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 4\n",
       "\n",
       "| height &lt;int&gt; | hair_color &lt;chr&gt; | birth_year &lt;dbl&gt; | species &lt;chr&gt; |\n",
       "|---|---|---|---|\n",
       "| 172 | blond |  19 | Human |\n",
       "| 167 | NA    | 112 | Droid |\n",
       "|  96 | NA    |  33 | Droid |\n",
       "\n"
      ],
      "text/plain": [
       "  height hair_color birth_year species\n",
       "1 172    blond       19        Human  \n",
       "2 167    NA         112        Droid  \n",
       "3  96    NA          33        Droid  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(matches(\"[aeiou]{2,}\")) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Arrange"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Wicket Systri Warrick</td><td> 8</td><td> 20</td></tr>\n",
       "\t<tr><td>IG-88                </td><td>15</td><td>140</td></tr>\n",
       "\t<tr><td>Luke Skywalker       </td><td>19</td><td> 77</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & mass\\\\\n",
       " <chr> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Wicket Systri Warrick &  8 &  20\\\\\n",
       "\t IG-88                 & 15 & 140\\\\\n",
       "\t Luke Skywalker        & 19 &  77\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| Wicket Systri Warrick |  8 |  20 |\n",
       "| IG-88                 | 15 | 140 |\n",
       "| Luke Skywalker        | 19 |  77 |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  age mass\n",
       "1 Wicket Systri Warrick  8   20 \n",
       "2 IG-88                 15  140 \n",
       "3 Luke Skywalker        19   77 "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, mass) %>%\n",
    "arrange(age) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Yoda                 </td><td>896</td><td>  17</td></tr>\n",
       "\t<tr><td>Jabba Desilijic Tiure</td><td>600</td><td>1358</td></tr>\n",
       "\t<tr><td>Chewbacca            </td><td>200</td><td> 112</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & mass\\\\\n",
       " <chr> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Yoda                  & 896 &   17\\\\\n",
       "\t Jabba Desilijic Tiure & 600 & 1358\\\\\n",
       "\t Chewbacca             & 200 &  112\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| Yoda                  | 896 |   17 |\n",
       "| Jabba Desilijic Tiure | 600 | 1358 |\n",
       "| Chewbacca             | 200 |  112 |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  age mass\n",
       "1 Yoda                  896   17\n",
       "2 Jabba Desilijic Tiure 600 1358\n",
       "3 Chewbacca             200  112"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, mass) %>%\n",
    "arrange(desc(age)) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 5 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Wicket Systri Warrick</td><td> 8</td><td> 20</td></tr>\n",
       "\t<tr><td>IG-88                </td><td>15</td><td>140</td></tr>\n",
       "\t<tr><td>Luke Skywalker       </td><td>19</td><td> 77</td></tr>\n",
       "\t<tr><td>Leia Organa          </td><td>19</td><td> 49</td></tr>\n",
       "\t<tr><td>Wedge Antilles       </td><td>21</td><td> 77</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 5 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & mass\\\\\n",
       " <chr> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Wicket Systri Warrick &  8 &  20\\\\\n",
       "\t IG-88                 & 15 & 140\\\\\n",
       "\t Luke Skywalker        & 19 &  77\\\\\n",
       "\t Leia Organa           & 19 &  49\\\\\n",
       "\t Wedge Antilles        & 21 &  77\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 5 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| Wicket Systri Warrick |  8 |  20 |\n",
       "| IG-88                 | 15 | 140 |\n",
       "| Luke Skywalker        | 19 |  77 |\n",
       "| Leia Organa           | 19 |  49 |\n",
       "| Wedge Antilles        | 21 |  77 |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  age mass\n",
       "1 Wicket Systri Warrick  8   20 \n",
       "2 IG-88                 15  140 \n",
       "3 Luke Skywalker        19   77 \n",
       "4 Leia Organa           19   49 \n",
       "5 Wedge Antilles        21   77 "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, mass) %>%\n",
    "arrange(age) %>%\n",
    "head(5)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 5 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Wicket Systri Warrick</td><td> 8</td><td> 20</td></tr>\n",
       "\t<tr><td>IG-88                </td><td>15</td><td>140</td></tr>\n",
       "\t<tr><td>Leia Organa          </td><td>19</td><td> 49</td></tr>\n",
       "\t<tr><td>Luke Skywalker       </td><td>19</td><td> 77</td></tr>\n",
       "\t<tr><td>Wedge Antilles       </td><td>21</td><td> 77</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 5 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & mass\\\\\n",
       " <chr> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Wicket Systri Warrick &  8 &  20\\\\\n",
       "\t IG-88                 & 15 & 140\\\\\n",
       "\t Leia Organa           & 19 &  49\\\\\n",
       "\t Luke Skywalker        & 19 &  77\\\\\n",
       "\t Wedge Antilles        & 21 &  77\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 5 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| Wicket Systri Warrick |  8 |  20 |\n",
       "| IG-88                 | 15 | 140 |\n",
       "| Leia Organa           | 19 |  49 |\n",
       "| Luke Skywalker        | 19 |  77 |\n",
       "| Wedge Antilles        | 21 |  77 |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  age mass\n",
       "1 Wicket Systri Warrick  8   20 \n",
       "2 IG-88                 15  140 \n",
       "3 Leia Organa           19   49 \n",
       "4 Luke Skywalker        19   77 \n",
       "5 Wedge Antilles        21   77 "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, mass) %>%\n",
    "arrange(age, mass) %>%\n",
    "head(5)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Chewbacca            </td><td>200</td><td> 112</td></tr>\n",
       "\t<tr><td>Jabba Desilijic Tiure</td><td>600</td><td>1358</td></tr>\n",
       "\t<tr><td>Yoda                 </td><td>896</td><td>  17</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & mass\\\\\n",
       " <chr> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Chewbacca             & 200 &  112\\\\\n",
       "\t Jabba Desilijic Tiure & 600 & 1358\\\\\n",
       "\t Yoda                  & 896 &   17\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| Chewbacca             | 200 |  112 |\n",
       "| Jabba Desilijic Tiure | 600 | 1358 |\n",
       "| Yoda                  | 896 |   17 |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  age mass\n",
       "1 Chewbacca             200  112\n",
       "2 Jabba Desilijic Tiure 600 1358\n",
       "3 Yoda                  896   17"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, mass) %>%\n",
    "top_n(age, n=3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Filter"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 5 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>C-3PO                </td><td>167</td><td>  75</td><td>NA   </td><td>gold            </td><td>yellow</td><td>112</td><td>NA           </td><td>Tatooine </td><td>Droid         </td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td></td></tr>\n",
       "\t<tr><td>Chewbacca            </td><td>228</td><td> 112</td><td>brown</td><td>unknown         </td><td>blue  </td><td>200</td><td>male         </td><td>Kashyyyk </td><td>Wookiee       </td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>AT-ST</td><td>Millennium Falcon, Imperial shuttle </td></tr>\n",
       "\t<tr><td>Jabba Desilijic Tiure</td><td>175</td><td>1358</td><td>NA   </td><td>green-tan, brown</td><td>orange</td><td>600</td><td>hermaphrodite</td><td>Nal Hutta</td><td>Hutt          </td><td>The Phantom Menace, Return of the Jedi, A New Hope        </td><td></td><td></td></tr>\n",
       "\t<tr><td>Yoda                 </td><td> 66</td><td>  17</td><td>white</td><td>green           </td><td>brown </td><td>896</td><td>male         </td><td>NA       </td><td>Yoda's species</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back</td><td></td><td></td></tr>\n",
       "\t<tr><td>Dooku                </td><td>193</td><td>  80</td><td>white</td><td>fair            </td><td>brown </td><td>102</td><td>male         </td><td>Serenno  </td><td>Human         </td><td>Attack of the Clones, Revenge of the Sith </td><td>Flitknot speeder</td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 5 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t C-3PO                 & 167 &   75 & NA    & gold             & yellow & 112 & NA            & Tatooine  & Droid          & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & \\\\\n",
       "\t Chewbacca             & 228 &  112 & brown & unknown          & blue   & 200 & male          & Kashyyyk  & Wookiee        & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & AT-ST & Millennium Falcon, Imperial shuttle \\\\\n",
       "\t Jabba Desilijic Tiure & 175 & 1358 & NA    & green-tan, brown & orange & 600 & hermaphrodite & Nal Hutta & Hutt           & The Phantom Menace, Return of the Jedi, A New Hope         &  & \\\\\n",
       "\t Yoda                  &  66 &   17 & white & green            & brown  & 896 & male          & NA        & Yoda's species & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back &  & \\\\\n",
       "\t Dooku                 & 193 &   80 & white & fair             & brown  & 102 & male          & Serenno   & Human          & Attack of the Clones, Revenge of the Sith  & Flitknot speeder & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 5 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| C-3PO                 | 167 |   75 | NA    | gold             | yellow | 112 | NA            | Tatooine  | Droid          | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | <!----> |\n",
       "| Chewbacca             | 228 |  112 | brown | unknown          | blue   | 200 | male          | Kashyyyk  | Wookiee        | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | AT-ST | Millennium Falcon, Imperial shuttle  |\n",
       "| Jabba Desilijic Tiure | 175 | 1358 | NA    | green-tan, brown | orange | 600 | hermaphrodite | Nal Hutta | Hutt           | The Phantom Menace, Return of the Jedi, A New Hope         | <!----> | <!----> |\n",
       "| Yoda                  |  66 |   17 | white | green            | brown  | 896 | male          | NA        | Yoda's species | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back | <!----> | <!----> |\n",
       "| Dooku                 | 193 |   80 | white | fair             | brown  | 102 | male          | Serenno   | Human          | Attack of the Clones, Revenge of the Sith  | Flitknot speeder | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  height mass hair_color skin_color       eye_color\n",
       "1 C-3PO                 167      75 NA         gold             yellow   \n",
       "2 Chewbacca             228     112 brown      unknown          blue     \n",
       "3 Jabba Desilijic Tiure 175    1358 NA         green-tan, brown orange   \n",
       "4 Yoda                   66      17 white      green            brown    \n",
       "5 Dooku                 193      80 white      fair             brown    \n",
       "  birth_year gender        homeworld species       \n",
       "1 112        NA            Tatooine  Droid         \n",
       "2 200        male          Kashyyyk  Wookiee       \n",
       "3 600        hermaphrodite Nal Hutta Hutt          \n",
       "4 896        male          NA        Yoda's species\n",
       "5 102        male          Serenno   Human         \n",
       "  films                                                                                                                                               \n",
       "1 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             \n",
       "2 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens                               \n",
       "3 The Phantom Menace, Return of the Jedi, A New Hope                                                                                                  \n",
       "4 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back                         \n",
       "5 Attack of the Clones, Revenge of the Sith                                                                                                           \n",
       "  vehicles         starships                           \n",
       "1                                                      \n",
       "2 AT-ST            Millennium Falcon, Imperial shuttle \n",
       "3                                                      \n",
       "4                                                      \n",
       "5 Flitknot speeder                                     "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "filter(birth_year > 100)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Jabba Desilijic Tiure</td><td>175</td><td>1358</td><td>NA   </td><td>green-tan, brown</td><td>orange</td><td>600</td><td>hermaphrodite</td><td>Nal Hutta</td><td>Hutt          </td><td>The Phantom Menace, Return of the Jedi, A New Hope        </td><td></td><td></td></tr>\n",
       "\t<tr><td>Yoda                 </td><td> 66</td><td>  17</td><td>white</td><td>green           </td><td>brown </td><td>896</td><td>male         </td><td>NA       </td><td>Yoda's species</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back</td><td></td><td></td></tr>\n",
       "\t<tr><td>Dooku                </td><td>193</td><td>  80</td><td>white</td><td>fair            </td><td>brown </td><td>102</td><td>male         </td><td>Serenno  </td><td>Human         </td><td>Attack of the Clones, Revenge of the Sith </td><td>Flitknot speeder</td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t Jabba Desilijic Tiure & 175 & 1358 & NA    & green-tan, brown & orange & 600 & hermaphrodite & Nal Hutta & Hutt           & The Phantom Menace, Return of the Jedi, A New Hope         &  & \\\\\n",
       "\t Yoda                  &  66 &   17 & white & green            & brown  & 896 & male          & NA        & Yoda's species & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back &  & \\\\\n",
       "\t Dooku                 & 193 &   80 & white & fair             & brown  & 102 & male          & Serenno   & Human          & Attack of the Clones, Revenge of the Sith  & Flitknot speeder & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| Jabba Desilijic Tiure | 175 | 1358 | NA    | green-tan, brown | orange | 600 | hermaphrodite | Nal Hutta | Hutt           | The Phantom Menace, Return of the Jedi, A New Hope         | <!----> | <!----> |\n",
       "| Yoda                  |  66 |   17 | white | green            | brown  | 896 | male          | NA        | Yoda's species | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back | <!----> | <!----> |\n",
       "| Dooku                 | 193 |   80 | white | fair             | brown  | 102 | male          | Serenno   | Human          | Attack of the Clones, Revenge of the Sith  | Flitknot speeder | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  height mass hair_color skin_color       eye_color\n",
       "1 Jabba Desilijic Tiure 175    1358 NA         green-tan, brown orange   \n",
       "2 Yoda                   66      17 white      green            brown    \n",
       "3 Dooku                 193      80 white      fair             brown    \n",
       "  birth_year gender        homeworld species       \n",
       "1 600        hermaphrodite Nal Hutta Hutt          \n",
       "2 896        male          NA        Yoda's species\n",
       "3 102        male          Serenno   Human         \n",
       "  films                                                                                                                      \n",
       "1 The Phantom Menace, Return of the Jedi, A New Hope                                                                         \n",
       "2 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back\n",
       "3 Attack of the Clones, Revenge of the Sith                                                                                  \n",
       "  vehicles         starships\n",
       "1                           \n",
       "2                           \n",
       "3 Flitknot speeder          "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "filter((birth_year >= 600) | (name == 'Dooku'))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>homeworld</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Jabba Desilijic Tiure</td><td>600</td><td>Nal Hutta</td></tr>\n",
       "\t<tr><td>Yoda                 </td><td>896</td><td>NA       </td></tr>\n",
       "\t<tr><td>Dooku                </td><td>102</td><td>Serenno  </td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & age & homeworld\\\\\n",
       " <chr> & <dbl> & <chr>\\\\\n",
       "\\hline\n",
       "\t Jabba Desilijic Tiure & 600 & Nal Hutta\\\\\n",
       "\t Yoda                  & 896 & NA       \\\\\n",
       "\t Dooku                 & 102 & Serenno  \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | homeworld &lt;chr&gt; |\n",
       "|---|---|---|\n",
       "| Jabba Desilijic Tiure | 600 | Nal Hutta |\n",
       "| Yoda                  | 896 | NA        |\n",
       "| Dooku                 | 102 | Serenno   |\n",
       "\n"
      ],
      "text/plain": [
       "  name                  age homeworld\n",
       "1 Jabba Desilijic Tiure 600 Nal Hutta\n",
       "2 Yoda                  896 NA       \n",
       "3 Dooku                 102 Serenno  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "filter((birth_year >= 600) | (name == 'Dooku')) %>%\n",
    "select(name, age=birth_year, homeworld)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Chewbacca</td><td>228</td><td>112</td><td>brown</td><td>unknown</td><td>blue </td><td>200</td><td>male</td><td>Kashyyyk</td><td>Wookiee       </td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>AT-ST</td><td>Millennium Falcon, Imperial shuttle </td></tr>\n",
       "\t<tr><td>Yoda     </td><td> 66</td><td> 17</td><td>white</td><td>green  </td><td>brown</td><td>896</td><td>male</td><td>NA      </td><td>Yoda's species</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back</td><td></td><td></td></tr>\n",
       "\t<tr><td>Dooku    </td><td>193</td><td> 80</td><td>white</td><td>fair   </td><td>brown</td><td>102</td><td>male</td><td>Serenno </td><td>Human         </td><td>Attack of the Clones, Revenge of the Sith </td><td>Flitknot speeder</td><td></td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t Chewbacca & 228 & 112 & brown & unknown & blue  & 200 & male & Kashyyyk & Wookiee        & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & AT-ST & Millennium Falcon, Imperial shuttle \\\\\n",
       "\t Yoda      &  66 &  17 & white & green   & brown & 896 & male & NA       & Yoda's species & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back &  & \\\\\n",
       "\t Dooku     & 193 &  80 & white & fair    & brown & 102 & male & Serenno  & Human          & Attack of the Clones, Revenge of the Sith  & Flitknot speeder & \\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| Chewbacca | 228 | 112 | brown | unknown | blue  | 200 | male | Kashyyyk | Wookiee        | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | AT-ST | Millennium Falcon, Imperial shuttle  |\n",
       "| Yoda      |  66 |  17 | white | green   | brown | 896 | male | NA       | Yoda's species | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back | <!----> | <!----> |\n",
       "| Dooku     | 193 |  80 | white | fair    | brown | 102 | male | Serenno  | Human          | Attack of the Clones, Revenge of the Sith  | Flitknot speeder | <!----> |\n",
       "\n"
      ],
      "text/plain": [
       "  name      height mass hair_color skin_color eye_color birth_year gender\n",
       "1 Chewbacca 228    112  brown      unknown    blue      200        male  \n",
       "2 Yoda       66     17  white      green      brown     896        male  \n",
       "3 Dooku     193     80  white      fair       brown     102        male  \n",
       "  homeworld species       \n",
       "1 Kashyyyk  Wookiee       \n",
       "2 NA        Yoda's species\n",
       "3 Serenno   Human         \n",
       "  films                                                                                                                      \n",
       "1 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      \n",
       "2 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back\n",
       "3 Attack of the Clones, Revenge of the Sith                                                                                  \n",
       "  vehicles         starships                           \n",
       "1 AT-ST            Millennium Falcon, Imperial shuttle \n",
       "2                                                      \n",
       "3 Flitknot speeder                                     "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "filter(birth_year > 100, gender=='male')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 13</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>birth_year</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>films</th><th scope=col>vehicles</th><th scope=col>starships</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th><th scope=col>&lt;list&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Luke Skywalker</td><td>172</td><td> 77</td><td>blond</td><td>fair </td><td>blue  </td><td> 19.0</td><td>male</td><td>Tatooine</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens      </td><td>Snowspeeder          , Imperial Speeder Bike</td><td>X-wing          , Imperial shuttle</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>167</td><td> 75</td><td>NA   </td><td>gold </td><td>yellow</td><td>112.0</td><td>NA  </td><td>Tatooine</td><td>Droid</td><td>Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td></td></tr>\n",
       "\t<tr><td>Darth Vader   </td><td>202</td><td>136</td><td>none </td><td>white</td><td>yellow</td><td> 41.9</td><td>male</td><td>Tatooine</td><td>Human</td><td>Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             </td><td></td><td>TIE Advanced x1</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 13\n",
       "\\begin{tabular}{r|lllllllllllll}\n",
       " name & height & mass & hair\\_color & skin\\_color & eye\\_color & birth\\_year & gender & homeworld & species & films & vehicles & starships\\\\\n",
       " <chr> & <int> & <dbl> & <chr> & <chr> & <chr> & <dbl> & <chr> & <chr> & <chr> & <list> & <list> & <list>\\\\\n",
       "\\hline\n",
       "\t Luke Skywalker & 172 &  77 & blond & fair  & blue   &  19.0 & male & Tatooine & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       & Snowspeeder          , Imperial Speeder Bike & X-wing          , Imperial shuttle\\\\\n",
       "\t C-3PO          & 167 &  75 & NA    & gold  & yellow & 112.0 & NA   & Tatooine & Droid & Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & \\\\\n",
       "\t Darth Vader    & 202 & 136 & none  & white & yellow &  41.9 & male & Tatooine & Human & Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              &  & TIE Advanced x1\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 13\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | birth_year &lt;dbl&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; | films &lt;list&gt; | vehicles &lt;list&gt; | starships &lt;list&gt; |\n",
       "|---|---|---|---|---|---|---|---|---|---|---|---|---|\n",
       "| Luke Skywalker | 172 |  77 | blond | fair  | blue   |  19.0 | male | Tatooine | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens       | Snowspeeder          , Imperial Speeder Bike | X-wing          , Imperial shuttle |\n",
       "| C-3PO          | 167 |  75 | NA    | gold  | yellow | 112.0 | NA   | Tatooine | Droid | Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | <!----> |\n",
       "| Darth Vader    | 202 | 136 | none  | white | yellow |  41.9 | male | Tatooine | Human | Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope              | <!----> | TIE Advanced x1 |\n",
       "\n"
      ],
      "text/plain": [
       "  name           height mass hair_color skin_color eye_color birth_year gender\n",
       "1 Luke Skywalker 172     77  blond      fair       blue       19.0      male  \n",
       "2 C-3PO          167     75  NA         gold       yellow    112.0      NA    \n",
       "3 Darth Vader    202    136  none       white      yellow     41.9      male  \n",
       "  homeworld species\n",
       "1 Tatooine  Human  \n",
       "2 Tatooine  Droid  \n",
       "3 Tatooine  Human  \n",
       "  films                                                                                                                                               \n",
       "1 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             , The Force Awakens                               \n",
       "2 Attack of the Clones   , The Phantom Menace     , Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope             \n",
       "3 Revenge of the Sith    , Return of the Jedi     , The Empire Strikes Back, A New Hope                                                               \n",
       "  vehicles                                    \n",
       "1 Snowspeeder          , Imperial Speeder Bike\n",
       "2                                             \n",
       "3                                             \n",
       "  starships                         \n",
       "1 X-wing          , Imperial shuttle\n",
       "2                                   \n",
       "3 TIE Advanced x1                   "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "filter(str_detect(homeworld, \"in\")) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Mutate"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 4</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>height</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Luke Skywalker</td><td> 19</td><td>172</td><td>77</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>112</td><td>167</td><td>75</td></tr>\n",
       "\t<tr><td>R2-D2         </td><td> 33</td><td> 96</td><td>32</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 4\n",
       "\\begin{tabular}{r|llll}\n",
       " name & age & height & mass\\\\\n",
       " <chr> & <dbl> & <int> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Luke Skywalker &  19 & 172 & 77\\\\\n",
       "\t C-3PO          & 112 & 167 & 75\\\\\n",
       "\t R2-D2          &  33 &  96 & 32\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 4\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | height &lt;int&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|---|\n",
       "| Luke Skywalker |  19 | 172 | 77 |\n",
       "| C-3PO          | 112 | 167 | 75 |\n",
       "| R2-D2          |  33 |  96 | 32 |\n",
       "\n"
      ],
      "text/plain": [
       "  name           age height mass\n",
       "1 Luke Skywalker  19 172    77  \n",
       "2 C-3PO          112 167    75  \n",
       "3 R2-D2           33  96    32  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, height, mass) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 6</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>age</th><th scope=col>height</th><th scope=col>mass</th><th scope=col>bmi</th><th scope=col>obese</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;lgl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Luke Skywalker</td><td> 19</td><td>172</td><td>77</td><td>26.02758</td><td>FALSE</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>112</td><td>167</td><td>75</td><td>26.89232</td><td>FALSE</td></tr>\n",
       "\t<tr><td>R2-D2         </td><td> 33</td><td> 96</td><td>32</td><td>34.72222</td><td> TRUE</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 6\n",
       "\\begin{tabular}{r|llllll}\n",
       " name & age & height & mass & bmi & obese\\\\\n",
       " <chr> & <dbl> & <int> & <dbl> & <dbl> & <lgl>\\\\\n",
       "\\hline\n",
       "\t Luke Skywalker &  19 & 172 & 77 & 26.02758 & FALSE\\\\\n",
       "\t C-3PO          & 112 & 167 & 75 & 26.89232 & FALSE\\\\\n",
       "\t R2-D2          &  33 &  96 & 32 & 34.72222 &  TRUE\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 6\n",
       "\n",
       "| name &lt;chr&gt; | age &lt;dbl&gt; | height &lt;int&gt; | mass &lt;dbl&gt; | bmi &lt;dbl&gt; | obese &lt;lgl&gt; |\n",
       "|---|---|---|---|---|---|\n",
       "| Luke Skywalker |  19 | 172 | 77 | 26.02758 | FALSE |\n",
       "| C-3PO          | 112 | 167 | 75 | 26.89232 | FALSE |\n",
       "| R2-D2          |  33 |  96 | 32 | 34.72222 |  TRUE |\n",
       "\n"
      ],
      "text/plain": [
       "  name           age height mass bmi      obese\n",
       "1 Luke Skywalker  19 172    77   26.02758 FALSE\n",
       "2 C-3PO          112 167    75   26.89232 FALSE\n",
       "3 R2-D2           33  96    32   34.72222  TRUE"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, height, mass) %>%\n",
    "mutate(bmi=mass/(height/100)^2, obese=bmi>30) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 2</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>bmi</th><th scope=col>obese</th></tr>\n",
       "\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;lgl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>26.02758</td><td>FALSE</td></tr>\n",
       "\t<tr><td>26.89232</td><td>FALSE</td></tr>\n",
       "\t<tr><td>34.72222</td><td> TRUE</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 2\n",
       "\\begin{tabular}{r|ll}\n",
       " bmi & obese\\\\\n",
       " <dbl> & <lgl>\\\\\n",
       "\\hline\n",
       "\t 26.02758 & FALSE\\\\\n",
       "\t 26.89232 & FALSE\\\\\n",
       "\t 34.72222 &  TRUE\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 2\n",
       "\n",
       "| bmi &lt;dbl&gt; | obese &lt;lgl&gt; |\n",
       "|---|---|\n",
       "| 26.02758 | FALSE |\n",
       "| 26.89232 | FALSE |\n",
       "| 34.72222 |  TRUE |\n",
       "\n"
      ],
      "text/plain": [
       "  bmi      obese\n",
       "1 26.02758 FALSE\n",
       "2 26.89232 FALSE\n",
       "3 34.72222  TRUE"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars%>% \n",
    "select(name, age=birth_year, height, mass) %>%\n",
    "transmute(bmi=mass/(height/100)^2, obese=bmi>30) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 7</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>hair_color</th><th scope=col>skin_color</th><th scope=col>eye_color</th><th scope=col>gender</th><th scope=col>homeworld</th><th scope=col>species</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>LUKE SKYWALKER</td><td>BLOND</td><td>FAIR       </td><td>BLUE  </td><td>MALE</td><td>TATOOINE</td><td>HUMAN</td></tr>\n",
       "\t<tr><td>C-3PO         </td><td>NA   </td><td>GOLD       </td><td>YELLOW</td><td>NA  </td><td>TATOOINE</td><td>DROID</td></tr>\n",
       "\t<tr><td>R2-D2         </td><td>NA   </td><td>WHITE, BLUE</td><td>RED   </td><td>NA  </td><td>NABOO   </td><td>DROID</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 7\n",
       "\\begin{tabular}{r|lllllll}\n",
       " name & hair\\_color & skin\\_color & eye\\_color & gender & homeworld & species\\\\\n",
       " <chr> & <chr> & <chr> & <chr> & <chr> & <chr> & <chr>\\\\\n",
       "\\hline\n",
       "\t LUKE SKYWALKER & BLOND & FAIR        & BLUE   & MALE & TATOOINE & HUMAN\\\\\n",
       "\t C-3PO          & NA    & GOLD        & YELLOW & NA   & TATOOINE & DROID\\\\\n",
       "\t R2-D2          & NA    & WHITE, BLUE & RED    & NA   & NABOO    & DROID\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 7\n",
       "\n",
       "| name &lt;chr&gt; | hair_color &lt;chr&gt; | skin_color &lt;chr&gt; | eye_color &lt;chr&gt; | gender &lt;chr&gt; | homeworld &lt;chr&gt; | species &lt;chr&gt; |\n",
       "|---|---|---|---|---|---|---|\n",
       "| LUKE SKYWALKER | BLOND | FAIR        | BLUE   | MALE | TATOOINE | HUMAN |\n",
       "| C-3PO          | NA    | GOLD        | YELLOW | NA   | TATOOINE | DROID |\n",
       "| R2-D2          | NA    | WHITE, BLUE | RED    | NA   | NABOO    | DROID |\n",
       "\n"
      ],
      "text/plain": [
       "  name           hair_color skin_color  eye_color gender homeworld species\n",
       "1 LUKE SKYWALKER BLOND      FAIR        BLUE      MALE   TATOOINE  HUMAN  \n",
       "2 C-3PO          NA         GOLD        YELLOW    NA     TATOOINE  DROID  \n",
       "3 R2-D2          NA         WHITE, BLUE RED       NA     NABOO     DROID  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "transmute_if(is_character, str_to_upper) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>birth_year</th><th scope=col>height</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td> 19</td><td>172</td><td>77</td></tr>\n",
       "\t<tr><td>112</td><td>167</td><td>75</td></tr>\n",
       "\t<tr><td> 33</td><td> 96</td><td>32</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " birth\\_year & height & mass\\\\\n",
       " <dbl> & <int> & <dbl>\\\\\n",
       "\\hline\n",
       "\t  19 & 172 & 77\\\\\n",
       "\t 112 & 167 & 75\\\\\n",
       "\t  33 &  96 & 32\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| birth_year &lt;dbl&gt; | height &lt;int&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "|  19 | 172 | 77 |\n",
       "| 112 | 167 | 75 |\n",
       "|  33 |  96 | 32 |\n",
       "\n"
      ],
      "text/plain": [
       "  birth_year height mass\n",
       "1  19        172    77  \n",
       "2 112        167    75  \n",
       "3  33         96    32  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "select_at(c(\"birth_year\", \"height\", \"mass\")) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 33,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>birth_year</th><th scope=col>height</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td> 20</td><td>173</td><td>78</td></tr>\n",
       "\t<tr><td>113</td><td>168</td><td>76</td></tr>\n",
       "\t<tr><td> 34</td><td> 97</td><td>33</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " birth\\_year & height & mass\\\\\n",
       " <dbl> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t  20 & 173 & 78\\\\\n",
       "\t 113 & 168 & 76\\\\\n",
       "\t  34 &  97 & 33\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 3\n",
       "\n",
       "| birth_year &lt;dbl&gt; | height &lt;dbl&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "|  20 | 173 | 78 |\n",
       "| 113 | 168 | 76 |\n",
       "|  34 |  97 | 33 |\n",
       "\n"
      ],
      "text/plain": [
       "  birth_year height mass\n",
       "1  20        173    78  \n",
       "2 113        168    76  \n",
       "3  34         97    33  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "transmute_at(c(\"birth_year\", \"height\", \"mass\"), ~ . + 1) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Summarize"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 1 × 2</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>avg_mass</th><th scope=col>median_age</th></tr>\n",
       "\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>97.31186</td><td>52</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 1 × 2\n",
       "\\begin{tabular}{r|ll}\n",
       " avg\\_mass & median\\_age\\\\\n",
       " <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t 97.31186 & 52\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 1 × 2\n",
       "\n",
       "| avg_mass &lt;dbl&gt; | median_age &lt;dbl&gt; |\n",
       "|---|---|\n",
       "| 97.31186 | 52 |\n",
       "\n"
      ],
      "text/plain": [
       "  avg_mass median_age\n",
       "1 97.31186 52        "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "summarize(avg_mass = mean(mass, na.rm=TRUE), \n",
    "          median_age=median(birth_year, na.rm=TRUE))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 35,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 1 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>height</th><th scope=col>mass</th><th scope=col>birth_year</th></tr>\n",
       "\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>174.358</td><td>97.31186</td><td>87.56512</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 1 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " height & mass & birth\\_year\\\\\n",
       " <dbl> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t 174.358 & 97.31186 & 87.56512\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 1 × 3\n",
       "\n",
       "| height &lt;dbl&gt; | mass &lt;dbl&gt; | birth_year &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| 174.358 | 97.31186 | 87.56512 |\n",
       "\n"
      ],
      "text/plain": [
       "  height  mass     birth_year\n",
       "1 174.358 97.31186 87.56512  "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "summarize_if(is.numeric, mean, na.rm=TRUE)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 36,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 1 × 6</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>height_fn1</th><th scope=col>mass_fn1</th><th scope=col>birth_year_fn1</th><th scope=col>height_fn2</th><th scope=col>mass_fn2</th><th scope=col>birth_year_fn2</th></tr>\n",
       "\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>174.358</td><td>97.31186</td><td>87.56512</td><td>180</td><td>79</td><td>52</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 1 × 6\n",
       "\\begin{tabular}{r|llllll}\n",
       " height\\_fn1 & mass\\_fn1 & birth\\_year\\_fn1 & height\\_fn2 & mass\\_fn2 & birth\\_year\\_fn2\\\\\n",
       " <dbl> & <dbl> & <dbl> & <int> & <dbl> & <dbl>\\\\\n",
       "\\hline\n",
       "\t 174.358 & 97.31186 & 87.56512 & 180 & 79 & 52\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 1 × 6\n",
       "\n",
       "| height_fn1 &lt;dbl&gt; | mass_fn1 &lt;dbl&gt; | birth_year_fn1 &lt;dbl&gt; | height_fn2 &lt;int&gt; | mass_fn2 &lt;dbl&gt; | birth_year_fn2 &lt;dbl&gt; |\n",
       "|---|---|---|---|---|---|\n",
       "| 174.358 | 97.31186 | 87.56512 | 180 | 79 | 52 |\n",
       "\n"
      ],
      "text/plain": [
       "  height_fn1 mass_fn1 birth_year_fn1 height_fn2 mass_fn2 birth_year_fn2\n",
       "1 174.358    97.31186 87.56512       180        79       52            "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "summarize_if(is.numeric, list(mean, median), na.rm=TRUE)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Group by"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 37,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 2</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>homeworld</th><th scope=col>avg_mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>NA         </td><td>82</td></tr>\n",
       "\t<tr><td>Alderaan   </td><td>64</td></tr>\n",
       "\t<tr><td>Aleen Minor</td><td>15</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 2\n",
       "\\begin{tabular}{r|ll}\n",
       " homeworld & avg\\_mass\\\\\n",
       " <chr> & <dbl>\\\\\n",
       "\\hline\n",
       "\t NA          & 82\\\\\n",
       "\t Alderaan    & 64\\\\\n",
       "\t Aleen Minor & 15\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 2\n",
       "\n",
       "| homeworld &lt;chr&gt; | avg_mass &lt;dbl&gt; |\n",
       "|---|---|\n",
       "| NA          | 82 |\n",
       "| Alderaan    | 64 |\n",
       "| Aleen Minor | 15 |\n",
       "\n"
      ],
      "text/plain": [
       "  homeworld   avg_mass\n",
       "1 NA          82      \n",
       "2 Alderaan    64      \n",
       "3 Aleen Minor 15      "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "group_by(homeworld) %>% \n",
    "summarize(avg_mass=mean(mass, na.rm=T)) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 3 × 2</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>homeworld</th><th scope=col>avg_mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Alderaan   </td><td>64</td></tr>\n",
       "\t<tr><td>Aleen Minor</td><td>15</td></tr>\n",
       "\t<tr><td>Bespin     </td><td>79</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 3 × 2\n",
       "\\begin{tabular}{r|ll}\n",
       " homeworld & avg\\_mass\\\\\n",
       " <chr> & <dbl>\\\\\n",
       "\\hline\n",
       "\t Alderaan    & 64\\\\\n",
       "\t Aleen Minor & 15\\\\\n",
       "\t Bespin      & 79\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 3 × 2\n",
       "\n",
       "| homeworld &lt;chr&gt; | avg_mass &lt;dbl&gt; |\n",
       "|---|---|\n",
       "| Alderaan    | 64 |\n",
       "| Aleen Minor | 15 |\n",
       "| Bespin      | 79 |\n",
       "\n"
      ],
      "text/plain": [
       "  homeworld   avg_mass\n",
       "1 Alderaan    64      \n",
       "2 Aleen Minor 15      \n",
       "3 Bespin      79      "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "group_by(homeworld) %>% \n",
    "summarize(avg_mass=mean(mass, na.rm=T)) %>%\n",
    "filter(!is.na(homeworld)) %>%\n",
    "head(3)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A grouped_df: 5 × 5</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>homeworld</th><th scope=col>species</th><th scope=col>gender</th><th scope=col>avg_mass</th><th scope=col>n</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Alderaan   </td><td>Human </td><td>female</td><td> 49</td><td>1</td></tr>\n",
       "\t<tr><td>Alderaan   </td><td>Human </td><td>male  </td><td> 79</td><td>2</td></tr>\n",
       "\t<tr><td>Aleen Minor</td><td>Aleena</td><td>male  </td><td> 15</td><td>1</td></tr>\n",
       "\t<tr><td>Bespin     </td><td>Human </td><td>male  </td><td> 79</td><td>1</td></tr>\n",
       "\t<tr><td>Bestine IV </td><td>Human </td><td>male  </td><td>110</td><td>1</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A grouped_df: 5 × 5\n",
       "\\begin{tabular}{r|lllll}\n",
       " homeworld & species & gender & avg\\_mass & n\\\\\n",
       " <chr> & <chr> & <chr> & <dbl> & <int>\\\\\n",
       "\\hline\n",
       "\t Alderaan    & Human  & female &  49 & 1\\\\\n",
       "\t Alderaan    & Human  & male   &  79 & 2\\\\\n",
       "\t Aleen Minor & Aleena & male   &  15 & 1\\\\\n",
       "\t Bespin      & Human  & male   &  79 & 1\\\\\n",
       "\t Bestine IV  & Human  & male   & 110 & 1\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A grouped_df: 5 × 5\n",
       "\n",
       "| homeworld &lt;chr&gt; | species &lt;chr&gt; | gender &lt;chr&gt; | avg_mass &lt;dbl&gt; | n &lt;int&gt; |\n",
       "|---|---|---|---|---|\n",
       "| Alderaan    | Human  | female |  49 | 1 |\n",
       "| Alderaan    | Human  | male   |  79 | 2 |\n",
       "| Aleen Minor | Aleena | male   |  15 | 1 |\n",
       "| Bespin      | Human  | male   |  79 | 1 |\n",
       "| Bestine IV  | Human  | male   | 110 | 1 |\n",
       "\n"
      ],
      "text/plain": [
       "  homeworld   species gender avg_mass n\n",
       "1 Alderaan    Human   female  49      1\n",
       "2 Alderaan    Human   male    79      2\n",
       "3 Aleen Minor Aleena  male    15      1\n",
       "4 Bespin      Human   male    79      1\n",
       "5 Bestine IV  Human   male   110      1"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "group_by(homeworld, species, gender) %>% \n",
    "summarize(avg_mass=mean(mass, na.rm=T), n=n()) %>%\n",
    "filter(!is.na(homeworld)) %>%\n",
    "head(5)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Exercises"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**1**. Show the name, height and mass of all Droids sorted by height from tallest to shortest."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 40,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 5 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>height</th><th scope=col>mass</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>IG-88</td><td>200</td><td>140</td></tr>\n",
       "\t<tr><td>C-3PO</td><td>167</td><td> 75</td></tr>\n",
       "\t<tr><td>R5-D4</td><td> 97</td><td> 32</td></tr>\n",
       "\t<tr><td>R2-D2</td><td> 96</td><td> 32</td></tr>\n",
       "\t<tr><td>BB8  </td><td> NA</td><td> NA</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 5 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " name & height & mass\\\\\n",
       " <chr> & <int> & <dbl>\\\\\n",
       "\\hline\n",
       "\t IG-88 & 200 & 140\\\\\n",
       "\t C-3PO & 167 &  75\\\\\n",
       "\t R5-D4 &  97 &  32\\\\\n",
       "\t R2-D2 &  96 &  32\\\\\n",
       "\t BB8   &  NA &  NA\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 5 × 3\n",
       "\n",
       "| name &lt;chr&gt; | height &lt;int&gt; | mass &lt;dbl&gt; |\n",
       "|---|---|---|\n",
       "| IG-88 | 200 | 140 |\n",
       "| C-3PO | 167 |  75 |\n",
       "| R5-D4 |  97 |  32 |\n",
       "| R2-D2 |  96 |  32 |\n",
       "| BB8   |  NA |  NA |\n",
       "\n"
      ],
      "text/plain": [
       "  name  height mass\n",
       "1 IG-88 200    140 \n",
       "2 C-3PO 167     75 \n",
       "3 R5-D4  97     32 \n",
       "4 R2-D2  96     32 \n",
       "5 BB8    NA     NA "
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>%\n",
    "filter(species == 'Droid') %>%\n",
    "arrange(desc(height)) %>%\n",
    "select(name, height, mass)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**2**. List the name and hoemworld of all non-humans who appeared in `The Empire Strikes Back`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 41,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning message in stri_detect_regex(string, pattern, negate = negate, opts_regex = opts(pattern)):\n",
      "“argument is not an atomic vector; coercing”"
     ]
    },
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 6 × 2</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>name</th><th scope=col>homeworld</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>C-3PO    </td><td>Tatooine </td></tr>\n",
       "\t<tr><td>R2-D2    </td><td>Naboo    </td></tr>\n",
       "\t<tr><td>Chewbacca</td><td>Kashyyyk </td></tr>\n",
       "\t<tr><td>Yoda     </td><td>NA       </td></tr>\n",
       "\t<tr><td>IG-88    </td><td>NA       </td></tr>\n",
       "\t<tr><td>Bossk    </td><td>Trandosha</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 6 × 2\n",
       "\\begin{tabular}{r|ll}\n",
       " name & homeworld\\\\\n",
       " <chr> & <chr>\\\\\n",
       "\\hline\n",
       "\t C-3PO     & Tatooine \\\\\n",
       "\t R2-D2     & Naboo    \\\\\n",
       "\t Chewbacca & Kashyyyk \\\\\n",
       "\t Yoda      & NA       \\\\\n",
       "\t IG-88     & NA       \\\\\n",
       "\t Bossk     & Trandosha\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 6 × 2\n",
       "\n",
       "| name &lt;chr&gt; | homeworld &lt;chr&gt; |\n",
       "|---|---|\n",
       "| C-3PO     | Tatooine  |\n",
       "| R2-D2     | Naboo     |\n",
       "| Chewbacca | Kashyyyk  |\n",
       "| Yoda      | NA        |\n",
       "| IG-88     | NA        |\n",
       "| Bossk     | Trandosha |\n",
       "\n"
      ],
      "text/plain": [
       "  name      homeworld\n",
       "1 C-3PO     Tatooine \n",
       "2 R2-D2     Naboo    \n",
       "3 Chewbacca Kashyyyk \n",
       "4 Yoda      NA       \n",
       "5 IG-88     NA       \n",
       "6 Bossk     Trandosha"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "filter(str_detect(films, 'The Empire Strikes Back'), species!='Human') %>%\n",
    "select(name, homeworld)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**3**. Which homeworld has the most humans?"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 42,
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Selecting by n\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 1 × 2</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>homeworld</th><th scope=col>n</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Tatooine</td><td>8</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 1 × 2\n",
       "\\begin{tabular}{r|ll}\n",
       " homeworld & n\\\\\n",
       " <chr> & <int>\\\\\n",
       "\\hline\n",
       "\t Tatooine & 8\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 1 × 2\n",
       "\n",
       "| homeworld &lt;chr&gt; | n &lt;int&gt; |\n",
       "|---|---|\n",
       "| Tatooine | 8 |\n",
       "\n"
      ],
      "text/plain": [
       "  homeworld n\n",
       "1 Tatooine  8"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "filter(species == \"Human\") %>%\n",
    "group_by(homeworld) %>% \n",
    "summarize(n=n()) %>%\n",
    "top_n(1)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "**4**. What species has the highest average BMI? Exclude Species with only 1 member, and ignore NAs in the calculation of the average."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 43,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table>\n",
       "<caption>A tibble: 1 × 3</caption>\n",
       "<thead>\n",
       "\t<tr><th scope=col>species</th><th scope=col>avg_bmi</th><th scope=col>n</th></tr>\n",
       "\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n",
       "</thead>\n",
       "<tbody>\n",
       "\t<tr><td>Droid</td><td>32.65613</td><td>5</td></tr>\n",
       "</tbody>\n",
       "</table>\n"
      ],
      "text/latex": [
       "A tibble: 1 × 3\n",
       "\\begin{tabular}{r|lll}\n",
       " species & avg\\_bmi & n\\\\\n",
       " <chr> & <dbl> & <int>\\\\\n",
       "\\hline\n",
       "\t Droid & 32.65613 & 5\\\\\n",
       "\\end{tabular}\n"
      ],
      "text/markdown": [
       "\n",
       "A tibble: 1 × 3\n",
       "\n",
       "| species &lt;chr&gt; | avg_bmi &lt;dbl&gt; | n &lt;int&gt; |\n",
       "|---|---|---|\n",
       "| Droid | 32.65613 | 5 |\n",
       "\n"
      ],
      "text/plain": [
       "  species avg_bmi  n\n",
       "1 Droid   32.65613 5"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "starwars %>% \n",
    "mutate(bmi = mass/(height/100)^2) %>%\n",
    "group_by(species) %>%\n",
    "summarize(avg_bmi=mean(bmi, na.rm=T), n=n()) %>%\n",
    "filter(n>1) %>%\n",
    "top_n(avg_bmi, n=1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "R",
   "language": "R",
   "name": "ir"
  },
  "language_info": {
   "codemirror_mode": "r",
   "file_extension": ".r",
   "mimetype": "text/x-r-source",
   "name": "R",
   "pygments_lexer": "r",
   "version": "3.6.0"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
